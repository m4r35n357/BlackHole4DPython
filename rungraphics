#!/bin/sh

initialConditions=$1
nPoints=$2
shift 2
coordinates=$*

dataFile='/tmp/data'

# run simulator
./bh3d.py <$initialConditions >$dataFile &
PID=$!

# plot orbit
sleep 1
./filegraphics.py $dataFile $initialConditions $nPoints &

# plot potential, coordinates/velocities (optional) and errors
wait $PID
./filepotential.py potential &
for coordinate in $coordinates
do
	./interpolate.py $dataFile $nPoints $coordinate &
done
./errorchart.py $dataFile $nPoints &

